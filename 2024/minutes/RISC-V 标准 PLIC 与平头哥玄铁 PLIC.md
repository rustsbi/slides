
# RISC-V 标准 PLIC 与平头哥 PLIC

## RISC-V 标准 PLIC

RISC-V 标准 PLIC 实现支持 1023 个中断源、15872 个上下文。

链接：[RISC-V PLIC Specification](https://github.com/riscv/riscv-plic-spec/blob/master/riscv-plic-1.0.0.pdf)

### 内存布局

| 地址偏移量         | 描述                                         |
| ------------------ | -------------------------------------------- |
| `base + 0x000000`  | 保留（中断源 0 不存在）                      |
| `base + 0x000004`  | 中断源 1 优先级                              |
| `base + 0x000008`  | 中断源 2 优先级                              |
| …                  | …                                            |
| `base + 0x000FFC`  | 中断源 1023 优先级                           |
| `base + 0x001000`  | 中断挂起位 0-31                              |
| `base + 0x00107C`  | 中断挂起位 992-1023                          |
| …                  | …                                            |
| `base + 0x002000`  | 上下文 0 的中断使能位（中断源 0-31）         |
| `base + 0x002004`  | 上下文 0 的中断使能位（中断源 32-63）        |
| …                  | …                                            |
| `base + 0x00207C`  | 上下文 0 的中断使能位（中断源 992-1023）     |
| `base + 0x002080`  | 上下文 1 的中断使能位（中断源 0-31）         |
| `base + 0x002084`  | 上下文 1 的中断使能位（中断源 32-63）        |
| …                  | …                                            |
| `base + 0x0020FC`  | 上下文 1 的中断使能位（中断源 992-1023）     |
| `base + 0x002100`  | 上下文 2 的中断使能位（中断源 0-31）         |
| `base + 0x002104`  | 上下文 2 的中断使能位（中断源 32-63）        |
| …                  | …                                            |
| `base + 0x00217C`  | 上下文 2 的中断使能位（中断源 992-1023）     |
| …                  | …                                            |
| `base + 0x1F1F80`  | 上下文 15871 的中断使能位（中断源 0-31）     |
| `base + 0x1F1F84`  | 上下文 15871 的中断使能位（中断源 32-63）    |
| `base + 0x1F1FFC`  | 上下文 15871 的中断使能位（中断源 992-1023） |
| …                  | …                                            |
| `base + 0x1FFFFC`  | 保留                                         |
| `base + 0x200000`  | 上下文 0 的优先级阈值                        |
| `base + 0x200004`  | 上下文 0 的中断认领/完成寄存器               |
| `base + 0x200008`  | 保留                                         |
| …                  | …                                            |
| `base + 0x200FFC`  | 保留                                         |
| `base + 0x201000`  | 上下文 1 的优先级阈值                        |
| `base + 0x201004`  | 上下文 1 的中断认领/完成寄存器               |
| …                  | …                                            |
| `base + 0x3FFF000` | 上下文 15871 的优先级阈值                    |
| `base + 0x3FFF004` | 上下文 15871 的中断认领/完成寄存器           |
| `base + 0x3FFF008` | 保留                                         |
| …                  | …                                            |
| `base + 0x3FFFFFC` | 保留                                         |

标准 PLIC 的内存块长度是 0x4000000。

## 平头哥 C906 PLIC

PLIC 中断可配置为 机器模式中断和超级用户模式中断；优先级寄存器、优先级阈值寄存器最低 5 位可写，即支持 0..=31 共 32 个不同的优先级；支持 1023 个中断源，2 个上下文（其中 1 个核，每个核 2 个上下文）。每个中断模式（机器/超级用户）的终端阈值/使能可独立维护；PLIC 寄存器访问权限可配置

与 RISC-V 标准 PLIC 的变化如下：

| 基地址   | 末尾地址 | 类型  | 含义                                                                                                                                                                                                            |
| :------- | :------- | :---- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0x1FFFFC | 0x1FFFFC | `u32` | PLIC_CTRL 权限控制寄存器。最低位 S_PER 为访问权限控制位，当为 0 时仅 M 态能访问 PLIC 控制器权限，S 态仅能访问 S 态优先级阈值和认领和完成位；为 1 时 S 态能访问除 PLIC_CTRL 外所有寄存器。U 态无访问 PLIC 权限。 |

C906 PLIC 内存布局

| 地址      | 名称           | 类型 | 初始值 | 描述                                        |
| --------- | -------------- | ---- | ------ | ------------------------------------------- |
| 0x0000004 | PLIC_PRIO1     | R/W  | 0x0    | 1-1023 号中断的优先级配置寄存器             |
| 0x0000008 | PLIC_PRIO2     | R/W  | 0x0    |                                             |
| 0x000000C | PLIC_PRIO3     | R/W  | 0x0    |                                             |
| …         | …              | …    | …      | …                                           |
| 0x0000FFC | PLIC_PRIO1023  | R/W  | 0x0    |                                             |
| 0x0001000 | PLIC_IP0       | R/W  | 0x0    | 1-31 号中断的中断等待寄存器                 |
| 0x0001004 | PLIC_IP1       | R/W  | 0x0    | 32-63 号中断的中断等待寄存器                |
| …         | …              | …    | …      | …                                           |
| 0x000107C | PLIC_IP31      | R/W  | 0x0    | 992-1023 号中断的中断等待寄存器             |
| Reserved  | -              | -    | -      | -                                           |
| 0x0002000 | PLIC_H0_MIE0   | R/W  | 0x0    | 1-31 号中断的机器模式中断使能寄存器         |
| 0x0002004 | PLIC_H0_MIE1   | R/W  | 0x0    | 32-63 号中断的机器模式中断使能寄存器        |
| …         | …              | …    | …      | …                                           |
| 0x000207C | PLIC_H0_MIE31  | R/W  | 0x0    | 992-1023 号中断的机器模式中断使能寄存器     |
| 0x0002080 | PLIC_H0_SIE0   | R/W  | 0x0    | 1-31 号中断的超级用户模式中断使能寄存器     |
| 0x0002084 | PLIC_H0_SIE1   | R/W  | 0x0    | 32-63 号中断的超级用户模式中断使能寄存器    |
| …         | …              | …    | …      | …                                           |
| 0x00020FC | PLIC_H0_SIE31  | R/W  | 0x0    | 992-1023 号中断的超级用户模式中断使能寄存器 |
| Reserved  | -              | -    | -      | -                                           |
| 0x01FFFFC | PLIC_CTRL      | R/W  | 0x0    | PLIC 权限控制寄存器                         |
| 0x0200000 | PLIC_H0_MTH    | R/W  | 0x0    | 机器模式中断阈值寄存器                      |
| 0x0200004 | PLIC_H0_MCLAIM | R/W  | 0x0    | 机器模式中断响应/完成寄存器                 |
| Reserved  | -              | -    | -      | -                                           |
| 0x0201000 | PLIC_H0_STH    | R/W  | 0x0    | 超级用户模式中断阈值寄存器                  |
| 0x0201004 | PLIC_H0_SCLAIM | R/W  | 0x0    | 超级用户模式中断响应/完成寄存器             |
| Reserved  | -              | -    | -      | -                                           |

## 玄铁 C920 R1S6 & C910

PLIC 最多支持 4 个核/ 8 个中断目标的中断分发

内存布局：

| 地址      | 名称           | 类型 | 初始值 | 描述                                         |
| --------- | -------------- | ---- | ------ | -------------------------------------------- |
| 0x0000000 | -              | -    | -      | -                                            |
| 0x0000004 | PLIC_PRIO1     | R/W  | 0x0    | 中断源 1 ～1023                              |
| 0x0000008 | PLIC_PRIO2     | R/W  | 0x0    | 优先级配置寄存器                             |
| 0x000000C | PLIC_PRIO3     | R/W  | 0x0    |                                              |
| …         | …              | …    | …      | …                                            |
| 0x0000FFC | PLIC_PRIO1023  | R/W  | 0x0    |                                              |
| 0x0001000 | PLIC_IP0       | R/W  | 0x0    | 1 ～31 号中断等待寄存器                      |
| 0x0001004 | PLIC_IP1       | R/W  | 0x0    | 32 ～63 号中断等待寄存器                     |
| …         | …              | …    | …      | …                                            |
| 0x000107C | PLIC_IP31      | R/W  | 0x0    | 992 ～1023 号中断等待寄存器                  |
| Reserved  | -              | -    | -      | -                                            |
| 0x0002000 | PLIC_H0_MIE0   | R/W  | 0x0    | 核 0 1 ～31 号机器模式中断使能寄存器         |
| 0x0002004 | PLIC_H0_MIE1   | R/W  | 0x0    | 核 0 32 ～63 号机器模式中断使能寄存器        |
| …         | …              | …    | …      | …                                            |
| 0x000207C | PLIC_H0_MIE31  | R/W  | 0x0    | 核 0 992 ～1023 号机器模式中断使能寄存器     |
| 0x0002080 | PLIC_H0_SIE0   | R/W  | 0x0    | 核 0 1 ～31 号超级用户模式中断使能寄存器     |
| 0x0002084 | PLIC_H0_SIE1   | R/W  | 0x0    | 核 0 32 ～63 号超级用户模式中断使能寄存器    |
| …         | …              | …    | …      | …                                            |
| 0x00020FC | PLIC_H0_SIE31  | R/W  | 0x0    | 核 0 992 ～1023 号超级用户模式中断使能寄存器 |
| 0x0002100 | PLIC_H1_MIE0   | R/W  | 0x0    | 核 1 1 ～31 号机器模式中断使能寄存器         |
| 0x0002104 | PLIC_H1_MIE1   | R/W  | 0x0    | 核 1 32 ～63 号机器模式中断使能寄存器        |
| …         | …              | …    | …      | …                                            |
| 0x000217C | PLIC_H1_MIE31  | R/W  | 0x0    | 核 1 992 ～1023 号机器模式中断使能寄存器     |
| 0x0002180 | PLIC_H1_SIE0   | R/W  | 0x0    | 核 1 1 ～31 号超级用户模式中断使能寄存器     |
| 0x0002184 | PLIC_H1_SIE1   | R/W  | 0x0    | 核 1 32 ～63 号超级用户模式中断使能寄存器    |
| …         | …              | …    | …      | …                                            |
| 0x00021FC | PLIC_H1_SIE31  | R/W  | 0x0    | 核 1 992 ～1023 号超级用户模式中断使能寄存器 |
| 0x0002200 | PLIC_H2_MIE0   | R/W  | 0x0    | 核 2 1 ～31 号机器模式中断使能寄存器         |
| 0x0002204 | PLIC_H2_MIE1   | R/W  | 0x0    | 核 2 32 ～63 号机器模式中断使能寄存器        |
| …         | …              | …    | …      | …                                            |
| 0x000227C | PLIC_H2_MIE31  | R/W  | 0x0    | 核 2 992 ～1023 号机器模式中断使能寄存器     |
| 0x0002280 | PLIC_H2_SIE0   | R/W  | 0x0    | 核 2 1 ～31 号超级用户模式中断使能寄存器     |
| 0x0002284 | PLIC_H2_SIE1   | R/W  | 0x0    | 核 2 32 ～63 号超级用户模式中断使能寄存器    |
| …         | …              | …    | …      | …                                            |
| 0x00022FC | PLIC_H2_SIE31  | R/W  | 0x0    | 核 2 992 ～1023 号超级用户模式中断使能寄存器 |
| 0x0002300 | PLIC_H3_MIE0   | R/W  | 0x0    | 核 3 1 ～31 号机器模式中断使能寄存器         |
| 0x0002304 | PLIC_H3_MIE1   | R/W  | 0x0    | 核 3 32 ～63 号机器模式中断使能寄存器        |
| …         | …              | …    | …      | …                                            |
| 0x000237C | PLIC_H3_MIE31  | R/W  | 0x0    | 核 3 992 ～1023 号机器模式中断使能寄存器     |
| 0x0002380 | PLIC_H3_SIE0   | R/W  | 0x0    | 核 3 1 ～31 号超级用户模式中断使能寄存器     |
| 0x0002384 | PLIC_H3_SIE1   | R/W  | 0x0    | 核 3 32 ～63 号超级用户模式中断使能寄存器    |
| …         | …              | …    | …      | …                                            |
| 0x00023FC | PLIC_H3_SIE31  | R/W  | 0x0    | 核 3 992 ～1023 号超级用户模式中断使能寄存器 |
| Reserved  | -              | -    | -      | -                                            |
| 0x01FFFFC | PLIC_CTRL      | R/W  | 0x0    | PLIC 权限控制寄存器                          |
| 0x0200000 | PLIC_H0_MTH    | R/W  | 0x0    | 核 0 机器模式中断阈值寄存器                  |
| 0x0200004 | PLIC_H0_MCLAIM | R/W  | 0x0    | 核 0 机器模式中断响应/完成寄存器             |
| Reserved  | -              | -    | -      | -                                            |
| 0x0201000 | PLIC_H0_STH    | R/W  | 0x0    | 核 0 超级用户模式中断阈值寄存器              |
| 0x0201004 | PLIC_H0_SCLAIM | R/W  | 0x0    | 核 0 超级用户模式中断响应/完成寄存器         |
| Reserved  | -              | -    | -      | -                                            |
| 0x0202000 | PLIC_H1_MTH    | R/W  | 0x0    | 核 1 机器模式中断阈值寄存器                  |
| 0x0202004 | PLIC_H1_MCLAIM | R/W  | 0x0    | 核 1 机器模式中断响应/完成寄存器             |
| Reserved  | -              | -    | -      | -                                            |
| 0x0203000 | PLIC_H1_STH    | R/W  | 0x0    | 核 1 超级用户模式中断阈值寄存器              |
| 0x0203004 | PLIC_H1_SCLAIM | R/W  | 0x0    | 核 1 超级用户模式中断响应/完成寄存器         |
| Reserved  | -              | -    | -      | -                                            |
| 0x0204000 | PLIC_H2_MTH    | R/W  | 0x0    | 核 2 机器模式中断阈值寄存器                  |
| 0x0204004 | PLIC_H2_MCLAIM | R/W  | 0x0    | 核 2 机器模式中断响应/完成寄存器             |
| Reserved  | -              | -    | -      | -                                            |
| 0x0205000 | PLIC_H2_STH    | R/W  | 0x0    | 核 2 超级用户模式中断阈值寄存器              |
| 0x0205004 | PLIC_H2_SCLAIM | R/W  | 0x0    | 核 2 超级用户模式中断响应/完成寄存器         |
| Reserved  | -              | -    | -      | -                                            |
| 0x0206000 | PLIC_H3_MTH    | R/W  | 0x0    | 核 3 机器模式中断阈值寄存器                  |
| 0x0206004 | PLIC_H3_MCLAIM | R/W  | 0x0    | 核 3 机器模式中断响应/完成寄存器             |
| Reserved  | -              | -    | -      | -                                            |
| 0x0207000 | PLIC_H3_STH    | R/W  | 0x0    | 核 3 超级用户模式中断阈值寄存器              |
| 0x0207004 | PLIC_H3_SCLAIM | R/W  | 0x0    | 核 3 超级用户模式中断响应/完成寄存器         |
| Reserved  | -              | -    | -      | -                                            |


## 玄铁 C907 & C908 R1S0 & C920 R2S3 PLIC

PLIC 最多支持 256 个核，每个核有 2 个目标，分别是机器模式和超级用户模式

内存布局：

| 寄存器类别  | 地址      | 名称           | 类型 | 初始值 | 描述                                                                |
| ----------- | --------- | -------------- | ---- | ------ | ------------------------------------------------------------------- |
| PLIC_PRIO   | 0x0000000 | -              | -    | -      | -                                                                   |
|             | 0x0000004 | PLIC_PRIO1     | R/W  | 0x0    | 中断源 1~1023                                                       |
|             | 0x0000008 | PLIC_PRIO2     | R/W  | 0x0    | 优先级配置寄存器                                                    |
|             | 0x000000C | PLIC_PRIO3     | R/W  | 0x0    |                                                                     |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x0000FFC | PLIC_PRIO1023  | R/W  | 0x0    |                                                                     |
| PLIC_IP     | 0x0001000 | PLIC_IP0       | R/W  | 0x0    | 1~31 号中断 中断等待寄存器                                          |
|             | 0x0001004 | PLIC_IP1       | R/W  | 0x0    | 32~63 号中断 中断等待寄存器                                         |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x000107C | PLIC_IP31      | R/W  | 0x0    | 992~1023 号中断 中断等待寄存器                                      |
| -           | -         | Reserved       | -    | -      | -                                                                   |
| PLIC_MIE    | 0x0002000 | PLIC_H0_MIE0   | R/W  | 0x0    | 核 0 1~31 号 机器模式中断使能寄存器                                 |
|             | 0x0002004 | PLIC_H0_MIE1   | R/W  | 0x0    | 核 0 32~63 机器模式中断使能寄存器                                   |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x000207C | PLIC_H0_MIE31  | R/W  | 0x0    | 核 0 992~1023 号 机器模式中断使能寄存器                             |
| PLIC_SIE    | 0x0002080 | PLIC_H0_SIE0   | R/W  | 0x0    | 核 0 1~31 号 超级用户模式中断使能寄存器                             |
|             | 0x0002084 | PLIC_H0_SIE1   | R/W  | 0x0    | 核 0 32~63 号 超级用户模式中断使能寄存器                            |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x00020FC | PLIC_H0_SIE31  | R/W  | 0x0    | 核 0 992~1023 号 超级用户模式中断使能寄存器                         |
|             | 0x0002100 | PLIC_H1_MIE0   | R/W  | 0x0    | 核 1 1~31 号 机器模式中断使能寄存器                                 |
|             | 0x0002104 | PLIC_H1_MIE1   | R/W  | 0x0    | 核 1 32~63 号 机器模式中断使能寄存器                                |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x000217C | PLIC_H1_MIE31  | R/W  | 0x0    | 核 1 992~1023 号 机器模式中断使能寄存器                             |
|             | 0x0002180 | PLIC_H1_SIE0   | R/W  | 0x0    | 核 1 1~31 号 超级用户模式中断使能寄存器                             |
|             | 0x0002184 | PLIC_H1_SIE1   | R/W  | 0x0    | 核 1 32~63 号 超级用户模式中断使能寄存器                            |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x00021FC | PLIC_H1_SIE31  | R/W  | 0x0    | 核 1 992~1023 号 超级用户模式中断使能寄存器                         |
|             | 0x0002000 | PLIC_Hn_MIE0   | R/W  | 0x0    | 核 hart_id 1~31 号 机器模式中断使能寄存器 n=hart_id ，n<256         |
|             | 0x0002004 | PLIC_Hn_MIE1   | R/W  | 0x0    | 核 hart_id 32~63 号 机器模式中断使能寄存器 n=hart_id ，n<256        |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x000207C | PLIC_Hn_MIE31  | R/W  | 0x0    | 核 hart_id 992~1023 号 机器模式中断使能寄存器 n=hart_id ，n<256     |
|             | 0x0002080 | PLIC_Hn_SIE0   | R/W  | 0x0    | 核 hart_id 1~31 号 超级用户模式中断使能寄存器 n=hart_id ，n<256     |
|             | 0x0002084 | PLIC_Hn_SIE1   | R/W  | 0x0    | 核 hart_id 32~63 号 超级用户模式中断使能寄存器 n=hart_id ，n<256    |
|             | …         | …              | …    | …      |                                                                     |
|             | 0x00020FC | PLIC_Hn_SIE31  | R/W  | 0x0    | 核 hart_id 992~1023 号 超级用户模式中断使能寄存器 n=hart_id ，n<256 |
| PLIC_CTRL   | 0x01FFFFC | PLIC_CTRL      | R/W  | 0x0    | PLIC 权限控制寄存器                                                 |
| PLIC_MTH    | 0x0200000 | PLIC_H0_MTH    | R/W  | 0x0    | 核 0 机器模式 中断阈值寄存器                                        |
| PLIC_MCLAIM | 0x0200004 | PLIC_H0_MCLAIM | R/W  | 0x0    | 核 0 机器模式 中断响应/完成寄存器                                   |
| -           | -         | Reserved       | -    | -      | -                                                                   |
| PLIC_STH    | 0x0201000 | PLIC_H0_STH    | R/W  | 0x0    | 核 0 超级用户模式 中断阈值寄存器                                    |
| PLIC_SCLAIM | 0x0201004 | PLIC_H0_SCLAIM | R/W  | 0x0    | 核 0 超级用户模式 中断响应/完成寄存器                               |
| -           | -         | Reserved       | -    | -      | -                                                                   |
|             | 0x0202000 | PLIC_H1_MTH    | R/W  | 0x0    | 核 1 机器模式 中断阈值寄存器                                        |
|             | 0x0202004 | PLIC_H1_MCLAIM | R/W  | 0x0    | 核 1 机器模式 中断响应/完成寄存器                                   |
| -           | -         | Reserved       | -    | -      | -                                                                   |
|             | 0x0203000 | PLIC_H1_STH    | R/W  | 0x0    | 核 1 超级用户模式 中断阈值寄存器                                    |
|             | 0x0203004 | PLIC_H1_SCLAIM | R/W  | 0x0    | 核 1 超级用户模式 中断响应/完成寄存器                               |
| -           | -         | Reserved       | -    | -      | -                                                                   |
|             | 0x0200000 | PLIC_Hn_MTH    | R/W  | 0x0    | 核 hart_id 机器模式 中断阈值寄存器 n=hart_id ，n<256                |
|             | 0x0200004 | PLIC_Hn_MCLAIM | R/W  | 0x0    | 核 hart_id 机器模式 中断响应/完成寄存器 n=hart_id ，n<256           |
| -           | -         | Reserved       | -    | -      | -                                                                   |
|             | 0x0201000 | PLIC_Hn_STH    | R/W  | 0x0    | 核 hart_id 超级用户模式 中断阈值寄存器 n=hart_id ，n<256            |
|             | 0x0201004 | PLIC_Hn_SCLAIM | R/W  | 0x0    | 核 hart_id 超级用户模式 中断响应/完成寄存器 n=hart_id ，n<256       |

## 基础信息

| 芯片系列                          | Priority 域位数 | 支持的中断源数量 | 最多支持的 hart 数量     |
| --------------------------------- | --------------- | ---------------- | ------------------------ |
| 平头哥 C906 PLIC                  | 5 位（0~31）    | 1023             | 1 个核（2 个上下文）     |
| 玄铁 C920 R1S6 & C910             | 5 位（0~31）    | 1023             | 4 个核（8 个上下文）     |
| 玄铁 C907 & C908 R1S0 & C920 R2S3 | 5 位（0~31）    | 1023             | 256 个核（512 个上下文） |

**玄铁系列芯片中断相关寄存器总结表**

| **寄存器类别** | **寄存器名称**       | **描述**                                                                | **C906** | **C920 R1S6 & C910** | **C907 & C908 R1S0 & C920 R2S3** |
| -------------- | -------------------- | ----------------------------------------------------------------------- | -------- | -------------------- | -------------------------------- |
| **优先级配置** | PLIC_PRIO1～PRIO1023 | 配置中断源 1～1023 的优先级                                             | 支持     | 支持                 | 支持                             |
| **中断等待**   | PLIC_IP0～IP31       | 指示中断源 1～1023 的中断等待状态（每 32 个中断源对应一个寄存器）       | 支持     | 支持                 | 支持                             |
| **中断使能**   | PLIC_Hn_MIE0～MIE31  | 核 hart_id 的机器模式中断使能寄存器（每 32 个中断源对应一个寄存器）     | 支持     | 支持                 | 支持                             |
|                | PLIC_Hn_SIE0～SIE31  | 核 hart_id 的超级用户模式中断使能寄存器（每 32 个中断源对应一个寄存器） | 支持     | 支持                 | 支持                             |
| **中断阈值**   | PLIC_Hn_MTH          | 核 hart_id 的机器模式中断阈值寄存器                                     | 支持     | 支持                 | 支持                             |
|                | PLIC_Hn_STH          | 核 hart_id 的超级用户模式中断阈值寄存器                                 | 支持     | 支持                 | 支持                             |
| **中断响应**   | PLIC_Hn_MCLAIM       | 核 hart_id 的机器模式中断响应/完成寄存器                                | 支持     | 支持                 | 支持                             |
|                | PLIC_Hn_SCLAIM       | 核 hart_id 的超级用户模式中断响应/完成寄存器                            | 支持     | 支持                 | 支持                             |
| **控制寄存器** | PLIC_CTRL            | PLIC 权限控制寄存器                                                     | 支持     | 支持                 | 支持                             |

## HART 与 Context ID 对应关系

- **玄铁 C906**：
  - 每个 HART 有 2 个上下文。
  - Machine Mode 对应 Context ID `0`。
  - Supervisor Mode 对应 Context ID `1`。

- **玄铁 C920 R1S6 & C910**：
  - 最多支持 4 个 HART。
  - 每个 HART 有 2 个上下文。
  - Context ID 从 `0` 开始按顺序分配。

- **玄铁 C907 & C908 R1S0 & C920 R2S3**：
  - 最多支持 256 个 HART。
  - 每个 HART 有 2 个上下文。
  - Context ID 按 `2n` 和 `2n + 1` 的规则分配，其中 `n` 为 HART ID。
    - Machine Mode 对应 Context ID `2n`。
    - Supervisor Mode 对应 Context ID `2n + 1`。

## 参考资料

1. [玄铁 C920 R2S3 用户手册](https://occ-oss-prod.oss-cn-hangzhou.aliyuncs.com/resource//1732520479212/%E7%8E%84%E9%93%81C920R2S3%EF%BC%88xrvm%EF%BC%89%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C_20241125.pdf)
2. [玄铁 C907 用户手册](https://occ-oss-prod.oss-cn-hangzhou.aliyuncs.com/resource//1728712840258/%E7%8E%84%E9%93%81C907%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%28xrvm_06%E7%89%88_no_trace_20241012%29.pdf)
3. [玄铁 C908 R1S0 用户手册](https://occ-oss-prod.oss-cn-hangzhou.aliyuncs.com/resource//1728724968057/%E7%8E%84%E9%93%81C908R1S0%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%28xrvm%29_20241012.pdf)
4. [玄铁 C910 与 C920 R1S6 用户手册](https://occ-oss-prod.oss-cn-hangzhou.aliyuncs.com/resource//1724180929123/%E7%8E%84%E9%93%81C910%E4%B8%8EC920R1S6%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%28xrvm%29_20240821.pdf)
5. [玄铁 C906 R2S1 用户手册](https://occ-oss-prod.oss-cn-hangzhou.aliyuncs.com/resource//1728704912403/%E7%8E%84%E9%93%81C906R2S1%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%28xrvm%29_20241012.pdf)
2. [RISC-V PLIC Specification](https://github.com/riscv/riscv-plic-spec/blob/master/riscv-plic-1.0.0.pdf)

